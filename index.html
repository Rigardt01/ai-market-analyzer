<!DOCTYPE html>
<html>
<head>
    <title>Gold Analyzer (M15)</title>
    <style>
        body { font-family: Arial; background:#111; color:white; text-align:center; }
        .card { background:#222; padding:20px; margin:40px auto; border-radius:10px; width:300px; }
        .buy { color:lime; font-size:22px; }
        .sell { color:red; font-size:22px; }
    </style>
</head>
<body>

<h1>Gold AI Analyzer (15 Minute)</h1>

<div class="card" id="XAUUSD">Loading...</div>

<script>

const apiKey = "457d408780544d6c90e1276bb2ed8259";

let lastSignal = ""; // Stores previous signal

async function fetchData(url){
  const response = await fetch(url);
  return await response.json();
}

async function analyze(){

  const interval = "15min";

  const price = await fetchData(`https://api.twelvedata.com/time_series?symbol=XAU/USD&interval=${interval}&outputsize=2&apikey=${apiKey}`);
  const atr   = await fetchData(`https://api.twelvedata.com/atr?symbol=XAU/USD&interval=${interval}&time_period=14&apikey=${apiKey}`);

  if(!price.values || !atr.values){
    document.getElementById("XAUUSD").innerHTML = "API limit reached";
    return;
  }

  const currentClose = parseFloat(price.values[0].close);
  const previousClose = parseFloat(price.values[1].close);
  const atrVal = parseFloat(atr.values[0].atr);

  let signal = "";
  let className = "";

  if(currentClose > previousClose){
    signal = "BUY";
    className = "buy";
  } else {
    signal = "SELL";
    className = "sell";
  }

  const entry = currentClose;

  let stopLoss, takeProfit;

  if(signal === "BUY"){
    stopLoss = entry - (atrVal * 1.5);
    takeProfit = entry + (atrVal * 2);
  } else {
    stopLoss = entry + (atrVal * 1.5);
    takeProfit = entry - (atrVal * 2);
  }

  // ðŸ”Š PRO SOUND ALERT (only if signal changes)
  if(signal !== lastSignal){
    new Audio("https://www.soundjay.com/buttons/sounds/button-3.mp3").play();
    lastSignal = signal;
  }

  document.getElementById("XAUUSD").innerHTML =
    `<h2>XAU/USD</h2>
     <p class="${className}">${signal}</p>
     <p>Entry: ${entry.toFixed(2)}</p>
     <p>Stop Loss: ${stopLoss.toFixed(2)}</p>
     <p>Take Profit: ${takeProfit.toFixed(2)}</p>`;

}

analyze();
setInterval(analyze, 300000);

</script>

</body>
</html>









