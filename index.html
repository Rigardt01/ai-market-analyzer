<!DOCTYPE html>
<html>
<head>
  <title>AI Market Analyzer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial; background:#0f172a; color:white; text-align:center; }
    h1 { margin-top:20px; }
    .card {
      background:#1e293b;
      margin:20px;
      padding:20px;
      border-radius:12px;
      box-shadow:0 0 15px rgba(0,0,0,0.5);
    }
    .buy { color:#22c55e; font-weight:bold; }
    .sell { color:#ef4444; font-weight:bold; }
    .wait { color:#facc15; font-weight:bold; }
  </style>
</head>
<body>

<h1>AI Market Analyzer</h1>

<div class="card" id="XAUUSD">Loading XAU/USD...</div>
<div class="card" id="EURUSD">Loading EUR/USD...</div>
<div class="card" id="GBPUSD">Loading GBP/USD...</div>

<script>

const apiKey = ab9b1755372a4fa8a1855ddd39bb2030

async function fetchData(url){
  const response = await fetch(url);
  return await response.json();
}

async function analyze(symbol, elementId){

  const interval = "1h";

  const price = await fetchData(`https://api.twelvedata.com/time_series?symbol=${symbol}&interval=${interval}&outputsize=1&apikey=${apiKey}`);
  const ema   = await fetchData(`https://api.twelvedata.com/ema?symbol=${symbol}&interval=${interval}&time_period=200&series_type=close&apikey=${apiKey}`);
  const rsi   = await fetchData(`https://api.twelvedata.com/rsi?symbol=${symbol}&interval=${interval}&time_period=14&series_type=close&apikey=${apiKey}`);
  const macd  = await fetchData(`https://api.twelvedata.com/macd?symbol=${symbol}&interval=${interval}&series_type=close&apikey=${apiKey}`);
  const atr = await fetchData(`https://api.twelvedata.com/atr?symbol=${symbol}&interval=${interval}&time_period=14&apikey=${apiKey}`);

  if(!price.values || !ema.values || !rsi.values || !macd.values){ || !atr.values

    document.getElementById(elementId).innerHTML = "API limit reached";
    return;
  }

  const close = parseFloat(price.values[0].close);
  const emaVal = parseFloat(ema.values[0].ema);
  const rsiVal = parseFloat(rsi.values[0].rsi);
  const macdVal = parseFloat(macd.values[0].macd);
  const macdSignal = parseFloat(macd.values[0].macd_signal);

  let score = 0;

  if(close > emaVal) score += 40;
  if(rsiVal > 50) score += 30;
  if(macdVal > macdSignal) score += 30;

  let signal = "WAIT";
  let className = "wait";

  if(score >= 80){ signal = "STRONG BUY"; className="buy"; }
  else if(score >= 60){ signal = "BUY"; className="buy"; }
  else if(score <= 30){ signal = "STRONG SELL"; className="sell"; }
  else if(score <= 50){ signal = "SELL"; className="sell"; }

  document.getElementById(elementId).innerHTML =
    `<h2>${symbol}</h2>
     <p class="${className}">${signal}</p>
     <p>Confidence: ${score}%</p>`;
}

function update(){
  analyze("XAU/USD","XAUUSD");
  analyze("EUR/USD","EURUSD");
  analyze("GBP/USD","GBPUSD");
}

update();
setInterval(update, 60000);

</script>

</body>
</html>
